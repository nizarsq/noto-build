<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
        <title>Noto-Build UI</title>
        <link rel="preconnect" href="https://cdn.jsdelivr.net">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/css/bootstrap.min.css" integrity="sha256-Ww++W3rXBfapN8SZitAvc9jw2Xb+Ixt0rvDsmWmQyTo=" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.min.js" integrity="sha256-KSlsysqp7TXtFo/FHjb1T9b425x3hrvzjMWaJyKbpcI=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/@fabiocaccamo/utils.js@0.11.0/dist/utils.min.js" integrity="sha256-S60ZC8AUyIS3MyisO+OjgRrgiJ86OIozBq4f/RLmYGg=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/clipboard.js@1.0.1/dist/clipboard.min.js" integrity="sha256-HUQP8SUHMJ/pHYah14Em47rjRwTvxaADBSuOJI9DuiU=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.10.2/Sortable.min.js" integrity="sha256-8Ww0c1qKDMdHT2+3s3369kzSXcgIrvqzSwzjdZ5qHDs=" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/vuedraggable@2.24.1/dist/vuedraggable.umd.min.js" integrity="sha256-3ux9DyWlRqDg9v2ZHRlKrQPru/To6i2BfQv4lenuRfs=" crossorigin="anonymous"></script>
        <style>
            html, body {
                width: 100%;
                height: 100%;
            }
            a, a:link, a:focus, a:hover, a:visited {
                color: #000000;
                text-decoration: underline;
            }
            a:focus, a:hover {
                text-decoration-style: wavy;
            }
            .container {
                max-width: 900px;
            }
            .disabled {
                pointer-events: none;
                opacity: 0.4;
            }
            .noselect,
            label.custom-control-label {
                /* https://stackoverflow.com/questions/3779534/how-do-i-disable-text-selection-with-css-or-javascript */
              -webkit-touch-callout: none; /* iOS Safari */
                -webkit-user-select: none; /* Safari */
                 -khtml-user-select: none; /* Konqueror HTML */
                   -moz-user-select: none; /* Firefox */
                    -ms-user-select: none; /* Internet Explorer/Edge */
                        user-select: none; /* Non-prefixed version, currently
                                              supported by Chrome and Opera */
            }
            .draggable {
                /* https://stackoverflow.com/questions/5697067/css-for-grabbing-cursors-drag-drop#18294634 */
                cursor: move; /* fallback if grab cursor is unsupported */
                cursor: grab;
                cursor: -moz-grab;
                cursor: -webkit-grab;
            }
            .draggable.sortable-chosen {
                cursor: grabbing;
                cursor: -moz-grabbing;
                cursor: -webkit-grabbing;
            }
            .command-container {
                position: sticky;
                bottom: 0;
                z-index: 10;
                background-color: rgba(255, 255, 255, 0.9);
            }
            .command-container code {
                pointer-events: all;
                max-height: 90px;
                overflow-y: scroll;
                line-height: 1.4;
            }
        </style>
    </head>
    <body>
        <div id="app" class="container" v-if="ready">
            <div class="row">
                <div class="col-12 mt-4 text-nowrap">
                    <h1 class="h1">noto-build-ui</h1>
                    <p class="small"><a href="https://github.com/notofonts/noto-build" target="_blank">view on GitHub &nearr;</a></p>
                </div>
            </div>
            <div class="row">
                <div class="col-12 text-nowrap mt-4">
                    <label class="control-name h5 d-block mb-3">Font Name</label>
                    <div class="row align-items-center">
                        <div class="col-12 col-md-6 mb-3 mb-md-2">
                            <input class="form-control form-control-sm" type="text" placeholder="My Noto" v-model="options.name">
                        </div>
                        <div class="col-6 col-sm-4 col-md-3 mb-2">
                            <div class="input-group input-group-sm">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">Version</span>
                                </div>
                                <input class="form-control form-control-sm" type="text" placeholder="1.000" v-model="options.version">
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <label class="control-name h5 d-block mb-3">Output Flavour</label>
                    <div class="row">
                        <div class="col-6 col-sm-2" v-for="item in choices.output">
                            <div class="custom-control form-control-sm custom-checkbox" v-bind:class="{ 'disabled': item.disabled }">
                                <input type="checkbox" v-model="options.output" v-bind:id="'output-' + item.value|slugify" v-bind:value="item.value" class="custom-control-input">
                                <label class="custom-control-label" v-bind:for="'output-' + item.value|slugify">{{ item.name|upper }}</label>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="row">
                        <div class="col-12 col-md-6 mb-2 mb-md-0">
                            <label class="control-name h5 d-block">Writing Systems Coverage<sup>*</sup></label>
                        </div>
                        <div class="col-12 col-md-6 mb-2 mb-md-0">
                            <input class="form-control form-control-sm" v-model="options.scripts_filter" type="text" placeholder="Filter..." v-on:input="onChangeScriptsFilter">
                        </div>
                        <div class="col-12 mb-3">
                            <div class="custom-control form-control-sm custom-checkbox">
                                <input type="checkbox" v-model="options.scripts_all" id="scripts-all" v-bind:value="options.scripts_all" v-on:change="onChangeScriptsAll" class="custom-control-input">
                                <label class="custom-control-label text-secondary" for="scripts-all"><small>Select / Deselect all</small></label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6 col-sm-4 col-md-3" v-for="item in choices.scripts" v-if="(!item.hidden) && ((item.featured || options.scripts_show_all) || (!item.featured && !options.scripts_show_all && options.scripts_filter && options.scripts_filter !== ''))">
                            <div class="custom-control form-control-sm custom-checkbox" v-bind:class="{ 'control-featured':item.featured }">
                                <input type="checkbox" v-model="options.scripts" v-bind:id="'scripts-' + item.value|slugify" v-bind:value="item.value" v-on:change="onChangeScripts" class="custom-control-input" required>
                                <label class="custom-control-label" v-bind:for="'scripts-' + item.value|slugify">
                                    <template v-if="item.featured && options.scripts_show_all"><strong>{{ item.name }}</strong></template>
                                    <template v-else>{{ item.name }}</template>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 mt-3 text-center" v-if="!(options.scripts_filter && options.scripts_filter !== '')">
                            <button type="button" class="btn btn-sm text-secondary btn-link border-0" @click="toggleScriptsShowAll">
                                <small>
                                    <template v-if="options.scripts_show_all">Show less&hellip;</template>
                                    <template v-else>Show more&hellip;</template>
                                </small>
                            </button>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="row">
                        <div class="col-12 mb-3">
                            <label class="control-name h5 d-block">Writing Systems Priorities</label>
                            <small class="text-secondary">Order writing systems: in case of common glyphs between fonts, only the first found will be kept.</small>
                        </div>
                        <div class="col-12 mt-2 mb-2 text-center" v-if="options.scripts.length < 2">
                            <small class="text-dark">Select two or more writing systems, please.</small>
                        </div>
                    </div>
                    <div class="row" v-if="options.scripts.length > 1">
                        <div class="col-12 mt-1 mb-1">
                            <draggable v-model="options.scripts" group="scripts_order" @start="options.scripts_dragging=true" @end="options.scripts_dragging=false">
                                <small class="bg-dark text-white rounded mr-1 mb-1 pt-1 pr-2 pb-1 pl-2 d-inline-block draggable" v-for="item in options.scripts">{{ item|scriptName }} </small>
                            </draggable>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <label class="control-name h5 d-block mb-3">Type of Contrast<sup>*</sup></label>
                    <div class="row">
                        <div class="col-6 col-sm-2" v-for="item in choices.contrast">
                            <div class="custom-control form-control-sm custom-radio">
                                <input type="radio" v-model="options.contrast" v-bind:id="'contrast-' + item.value|slugify" v-bind:value="item.value" v-on:change="onChangeContrast" class="custom-control-input" required>
                                <label class="custom-control-label" v-bind:for="'contrast-' + item.value|slugify">{{ item.name }}</label>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <label class="control-name h5 d-block mb-3">Style</label>
                    <div class="row">
                        <div class="col-6 col-sm-2" v-for="item in choices.styles">
                            <div class="custom-control form-control-sm custom-checkbox" v-bind:class="{ 'disabled': item.disabled }">
                                <input type="checkbox" v-model="options.styles" v-bind:id="'styles-' + item.value|slugify" v-bind:value="item.value" v-bind:disabled="item.disabled" v-on:change="onChangeStyles" class="custom-control-input">
                                <label class="custom-control-label" v-bind:for="'styles-' + item.value|slugify">{{ item.name }}</label>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="row">
                        <div class="col-12 mb-3">
                            <label class="control-name h5 d-block _mb-3">Weight</label>
                            <div class="custom-control form-control-sm custom-checkbox">
                                <input type="checkbox" v-model="options.weights_all" id="weights-all" v-bind:value="options.weights_all" v-on:change="onChangeWeightsAll" indeterminate class="custom-control-input">
                                <label class="custom-control-label text-secondary" for="weights-all"><small>Select / Deselect all</small></label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6 col-sm-4 col-md-3" v-for="item in choices.weight">
                            <div class="custom-control form-control-sm custom-checkbox">
                                <input type="checkbox" v-model="options.weight" v-bind:id="'weight-' + item.value|slugify" v-bind:value="item.value" class="custom-control-input">
                                <label class="custom-control-label" v-bind:for="'weight-' + item.value|slugify">{{ item.name }}</label>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <div class="row">
                        <div class="col-12 mb-3">
                            <label class="control-name h5 d-block">Width</label>
                            <div class="custom-control form-control-sm custom-checkbox">
                                <input type="checkbox" v-model="options.widths_all" id="widths-all" v-bind:value="options.widths_all" v-on:change="onChangeWidthsAll" indeterminate class="custom-control-input">
                                <label class="custom-control-label text-secondary" for="widths-all"><small>Select / Deselect all</small></label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-6 col-sm-4 col-md-3" v-for="item in choices.width">
                            <div class="custom-control form-control-sm custom-checkbox">
                                <input type="checkbox" v-model="options.width" v-bind:id="'width-' + item.value|slugify" v-bind:value="item.value" class="custom-control-input">
                                <label class="custom-control-label" v-bind:for="'width-' + item.value|slugify">{{ item.name }}</label>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <label class="control-name h5 d-block mb-3">Metrics</label>
                    <div class="row">
                        <div class="col-12 col-sm-6 mb-2" v-for="(item, key) in choices.metrics">
                            <div class="row align-items-center no-gutters">
                                <div class="col-3">
                                    <label class="mb-0" v-bind:for="'metrics-' + item.name|slugify">{{ item.name }}</label>
                                </div>
                                <div class="col-6 pl-3 pr-3">
                                    <input type="range" class="form-control form-control-sm" v-bind:min="item.min" v-bind:max="item.max" step="10" v-model="options.metrics[key]">
                                </div>
                                <div class="col-3">
                                    <input type="number" class="form-control form-control-sm text-center rounded" placeholder="0" v-bind:id="'metrics-' + item.name|slugify" v-model="options.metrics[key]">
                                </div>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <label class="control-name h5 d-block mb-3">Hinting</label>
                    <div class="row">
                        <div class="col-6 col-sm-4 col-md-3">
                            <div class="custom-control custom-control-inline form-control-sm custom-radio">
                                <input type="radio" id="hinted-no" class="custom-control-input" v-model="options.hinted" v-bind:value="false">
                                <label class="custom-control-label" for="hinted-no">No</label>
                            </div>
                            <div class="custom-control custom-control-inline form-control-sm custom-radio">
                                <input type="radio" id="hinted-yes" class="custom-control-input" v-model="options.hinted" v-bind:value="true">
                                <label class="custom-control-label" for="hinted-yes">Yes</label>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-12">
                    <label class="control-name h5 d-block mb-3">UI Version</label>
                    <div class="row">
                        <div class="col-6 col-sm-4 col-md-3">
                            <div class="custom-control custom-control-inline form-control-sm custom-radio">
                                <input type="radio" id="ui-no" class="custom-control-input" v-model="options.ui" v-bind:value="false">
                                <label class="custom-control-label" for="ui-no">No</label>
                            </div>
                            <div class="custom-control custom-control-inline form-control-sm custom-radio">
                                <input type="radio" id="ui-yes" class="custom-control-input" v-model="options.ui" v-bind:value="true">
                                <label class="custom-control-label" for="ui-yes">Yes</label>
                            </div>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-12 mb-2">
                    <label class="control-name h5 d-block mb-3">Coverage Presets</label>
                    <div class="row mb-2">
                        <div class="col-6 col-sm-4 col-md-4 mt-2 mb-4" v-for="group in choices.subset">
                            <label class="control-name d-block h6">{{ group.name }}</label>
                            <div class="custom-control form-control-sm custom-radio" v-for="item in group.subsets" v-bind:class="{ 'disabled': item.disabled }">
                                <input class="custom-control-input" type="radio" v-bind:id="'subset-' + (group.name + '-' + item.name)|slugify" v-model="options.subset[group.name]" v-bind:value="item.value" v-bind:disabled="item.disabled">
                                <label class="custom-control-label" v-bind:for="'subset-' + (group.name + '-' + item.name)|slugify">{{ item.name }}</label>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12 mb-3">
                            <label class="control-name d-block h6">Character Subset to Keep</label>
                            <textarea class="form-control form-control-sm" rows="3" v-model="options.subset_chars" v-on:input="onChangeCharacterSubset"></textarea>
                        </div>
                    </div>
                    <hr>
                </div>
            </div>
            <div class="row">
                <div class="col-12 mb-5">
                    <label class="control-name h5 d-block mb-3">Alternate Lettershapes</label>
                    <div class="row mb-2">
                        <div class="col-12 col-sm-4 mb-3 mb-sm-0 border-right">
                            <div class="custom-control form-control-sm custom-radio" v-bind:class="{ 'disabled': !(options.swap_enabled && options.swap_altIJ_enabled) }">
                                <input type="radio" id="swap-altij-no" class="custom-control-input" v-model="options.swap_altIJ" v-bind:value="false">
                                <label class="custom-control-label" for="swap-altij-no">Default I and J</label>
                            </div>
                            <div class="custom-control form-control-sm custom-radio" v-bind:class="{ 'disabled': !(options.swap_enabled && options.swap_altIJ_enabled) }">
                                <input type="radio" id="swap-altij-yes" class="custom-control-input" v-model="options.swap_altIJ" v-bind:value="true">
                                <label class="custom-control-label" for="swap-altij-yes">Alternates I and J</label>
                            </div>
                        </div>
                        <div class="col-12 col-sm-8">
                            <div class="row">
                                <div class="col-12 col-md-6">
                                    <div class="custom-control form-control-sm custom-radio" v-bind:class="{ 'disabled': !options.swap_enabled }">
                                        <input type="radio" id="swap-tlf" class="custom-control-input" v-model="options.swap_figures" value="">
                                        <label class="custom-control-label" for="swap-tlf">Tabular Lining Figures</label>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6">
                                    <div class="custom-control form-control-sm custom-radio" v-bind:class="{ 'disabled': !options.swap_enabled }">
                                        <input type="radio" id="swap-plf" class="custom-control-input" v-model="options.swap_figures" value="plf">
                                        <label class="custom-control-label" for="swap-plf">Proportional Lining Figures</label>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6">
                                    <div class="custom-control form-control-sm custom-radio" v-bind:class="{ 'disabled': !options.swap_enabled }">
                                        <input type="radio" id="swap-tosf" class="custom-control-input" v-model="options.swap_figures" value="tosf">
                                        <label class="custom-control-label" for="swap-tosf">Tabular Old Style Figures</label>
                                    </div>
                                </div>
                                <div class="col-12 col-md-6">
                                    <div class="custom-control form-control-sm custom-radio" v-bind:class="{ 'disabled': !options.swap_enabled }">
                                        <input type="radio" id="swap-osf" class="custom-control-input" v-model="options.swap_figures" value="osf">
                                        <label class="custom-control-label" for="swap-osf">Old Style Figures</label>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- <hr> -->
                </div>
            </div>
            <div class="command-container">
                <div class="row border-top">
                    <div class="col-12 pt-4 pb-4">
                        <div class="row">
                            <div class="col-12 mb-3">
                                <label class="control-name d-block h6 white">Command</label>
                                <div class="bg-light border rounded d-block">
                                    <code class="small d-block pt-2 pb-2 pl-3 pr-3" v-bind:class="{ 'disabled': !commandOk }"><small class="pb-2">{{ command }}</small></code>
                                </div>
                            </div>
                            <div class="col-12 text-right" v-bind:class="{ 'disabled': !commandOk }">
                                <template v-if="copyCommandDone">
                                    <button type="button" class="btn btn-sm btn-info border-0 pl-3 pr-3">&#x2713; Copied!</button>
                                </template>
                                <template v-else>
                                    <button type="button" class="btn btn-sm btn-dark border-0 pl-3 pr-3" @click="copyCommand">&laquo; Copy</button>
                                </template>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            var app = new Vue({
                el: '#app',
                data: function() {
                    return {
                        ready: false,
                        choices: {
                            output: [
                                // {
                                //     name:'OTF',
                                //     value:'otf'
                                // },
                                {
                                    name:'TTF',
                                    value:'ttf'
                                },
                                // {
                                //     name:'VAR',
                                //     value:'var'
                                // },
                                {
                                    name:'WOFF2',
                                    value:'woff2'
                                }
                            ],
                            scripts: [
                                {
                                    name:'Adlam',
                                    value:'Adlam'
                                },
                                {
                                    name:'Arabic',
                                    value:'Arabic',
                                    featured: true
                                },
                                {
                                    name:'Armenian',
                                    value:'Armenian',
                                    featured: true
                                },
                                {
                                    name:'Avestan',
                                    value:'Avestan'
                                },
                                {
                                    name:'Balinese',
                                    value:'Balinese'
                                },
                                {
                                    name:'Bamum',
                                    value:'Bamum'
                                },
                                {
                                    name:'Batak',
                                    value:'Batak'
                                },
                                {
                                    name:'Bengali',
                                    value:'Bengali',
                                    featured: true
                                },
                                {
                                    name:'Brahmi',
                                    value:'Brahmi'
                                },
                                {
                                    name:'Buginese',
                                    value:'Buginese'
                                },
                                {
                                    name:'Buhid',
                                    value:'Buhid'
                                },
                                {
                                    name:'Burmese',
                                    value:'Burmese',
                                    featured: true
                                },
                                {
                                    name:'Canadian Aboriginal',
                                    value:'CanadianAboriginal',
                                    featured: true
                                },
                                {
                                    name:'Carian',
                                    value:'Carian'
                                },
                                {
                                    name:'Chakma',
                                    value:'Chakma'
                                },
                                {
                                    name:'Cham',
                                    value:'Cham'
                                },
                                {
                                    name:'Cherokee',
                                    value:'Cherokee',
                                    featured: true
                                },
                                {
                                    name:'Coptic',
                                    value:'Coptic'
                                },
                                {
                                    name:'Cuneiform',
                                    value:'Cuneiform'
                                },
                                {
                                    name:'Cypriot',
                                    value:'Cypriot'
                                },
                                {
                                    name:'Cyrillic',
                                    value:'Cyrillic',
                                    featured: true
                                },
                                {
                                    name:'Deseret',
                                    value:'Deseret'
                                },
                                {
                                    name:'Devanagari',
                                    value:'Devanagari',
                                    featured: true
                                },
                                {
                                    name:'Ethiopic',
                                    value:'Ethiopic',
                                    featured: true
                                },
                                {
                                    name:'Georgian',
                                    value:'Georgian',
                                    featured: true
                                },
                                {
                                    name:'Glagolitic',
                                    value:'Glagolitic'
                                },
                                {
                                    name:'Gothic',
                                    value:'Gothic'
                                },
                                {
                                    name:'Greek',
                                    value:'Greek',
                                    featured: true
                                },
                                {
                                    name:'Gujarati',
                                    value:'Gujarati',
                                    featured: true
                                },
                                {
                                    name:'Gurmukhi',
                                    value:'Gurmukhi',
                                    featured: true
                                },
                                {
                                    name:'Hanunoo',
                                    value:'Hanunoo'
                                },
                                {
                                    name:'Hebrew',
                                    value:'Hebrew',
                                    featured: true
                                },
                                {
                                    name:'Imperial Aramaic',
                                    value:'ImperialAramaic'
                                },
                                {
                                    name:'Inscriptional Pahlavi',
                                    value:'InscriptionalPahlavi'
                                },
                                {
                                    name:'Inscriptional Parthian',
                                    value:'InscriptionalParthian'
                                },
                                {
                                    name:'Javanese',
                                    value:'Javanese',
                                    featured: true
                                },
                                {
                                    name:'Kaithi',
                                    value:'Kaithi'
                                },
                                {
                                    name:'Kannada',
                                    value:'Kannada',
                                    featured: true
                                },
                                {
                                    name:'KayahLi',
                                    value:'KayahLi'
                                },
                                {
                                    name:'Khmer',
                                    value:'Khmer',
                                    featured: true
                                },
                                {
                                    name:'Lao',
                                    value:'Lao',
                                    featured: true
                                },
                                {
                                    name:'Latin',
                                    value:'Latin',
                                    featured: true
                                },
                                {
                                    name:'Lepcha',
                                    value:'Lepcha'
                                },
                                {
                                    name:'Limbu',
                                    value:'Limbu'
                                },
                                {
                                    name:'Linear B',
                                    value:'LinearB'
                                },
                                {
                                    name:'Lisu',
                                    value:'Lisu'
                                },
                                {
                                    name:'Lycian',
                                    value:'Lycian'
                                },
                                {
                                    name:'Lydian',
                                    value:'Lydian'
                                },
                                {
                                    name:'Malayalam',
                                    value:'Malayalam',
                                    featured: true
                                },
                                {
                                    name:'Mandaic',
                                    value:'Mandaic'
                                },
                                {
                                    name:'Meetei Mayek',
                                    value:'MeeteiMayek'
                                },
                                {
                                    name:'Mongolian',
                                    value:'Mongolian',
                                    featured: true
                                },
                                {
                                    name:'Myanmar',
                                    value:'Myanmar'
                                },
                                {
                                    name:'New Tai Lue',
                                    value:'NewTaiLue'
                                },
                                {
                                    name:'NKo',
                                    value:'NKo'
                                },
                                {
                                    name:'Nushu',
                                    value:'Nushu'
                                },
                                {
                                    name:'Odia',
                                    value:'Odia',
                                    featured: true
                                },
                                {
                                    name:'Ogham',
                                    value:'Ogham'
                                },
                                {
                                    name:'Ol Chiki',
                                    value:'OlChiki'
                                },
                                {
                                    name:'Old Italic',
                                    value:'OldItalic'
                                },
                                {
                                    name:'Old Persian',
                                    value:'OldPersian'
                                },
                                {
                                    name:'Old South Arabian',
                                    value:'OldSouthArabian'
                                },
                                {
                                    name:'Old Turkic',
                                    value:'OldTurkic'
                                },
                                {
                                    name:'Oriya',
                                    value:'Oriya'
                                },
                                {
                                    name:'Osage',
                                    value:'Osage'
                                },
                                {
                                    name:'Osmanya',
                                    value:'Osmanya'
                                },
                                {
                                    name:'Phags Pa',
                                    value:'PhagsPa'
                                },
                                {
                                    name:'Phoenician',
                                    value:'Phoenician'
                                },
                                {
                                    name:'Rejang',
                                    value:'Rejang'
                                },
                                {
                                    name:'Runic',
                                    value:'Runic'
                                },
                                {
                                    name:'Samaritan',
                                    value:'Samaritan'
                                },
                                {
                                    name:'Saurashtra',
                                    value:'Saurashtra'
                                },
                                {
                                    name:'Shavian',
                                    value:'Shavian'
                                },
                                {
                                    name:'Sinhala',
                                    value:'Sinhala',
                                    featured: true
                                },
                                {
                                    name:'Sundanese',
                                    value:'Sundanese',
                                    featured: true
                                },
                                {
                                    name:'Syloti Nagri',
                                    value:'SylotiNagri'
                                },
                                {
                                    name:'Syriac Eastern',
                                    value:'SyriacEastern'
                                },
                                {
                                    name:'Syriac Estrangela',
                                    value:'SyriacEstrangela'
                                },
                                {
                                    name:'Syriac Western',
                                    value:'SyriacWestern'
                                },
                                {
                                    name:'Tagalog',
                                    value:'Tagalog'
                                },
                                {
                                    name:'Tagbanwa',
                                    value:'Tagbanwa'
                                },
                                {
                                    name:'Tai Le',
                                    value:'TaiLe'
                                },
                                {
                                    name:'Tai Tham',
                                    value:'TaiTham'
                                },
                                {
                                    name:'Tai Viet',
                                    value:'TaiViet'
                                },
                                {
                                    name:'Tamil',
                                    value:'Tamil',
                                    featured: true
                                },
                                {
                                    name:'Telugu',
                                    value:'Telugu',
                                    featured: true
                                },
                                {
                                    name:'Thaana',
                                    value:'Thaana',
                                    featured: true
                                },
                                {
                                    name:'Thai',
                                    value:'Thai',
                                    featured: true
                                },
                                {
                                    name:'Tibetan',
                                    value:'Tibetan',
                                    featured: true
                                },
                                {
                                    name:'Tifinagh',
                                    value:'Tifinagh'
                                },
                                {
                                    name:'Ugaritic',
                                    value:'Ugaritic'
                                },
                                {
                                    name:'Vai',
                                    value:'Vai'
                                },
                                {
                                    name:'Yi',
                                    value:'Yi'
                                }
                            ],
                            contrast: [
                                {
                                    name:'Sans',
                                    value:'Sans'
                                },
                                {
                                    name:'Serif',
                                    value:'Serif'
                                }
                            ],
                            styles: [
                                {
                                    name:'Italic',
                                    value:'Italic',
                                    disabled:true
                                },
                                {
                                    name:'Mono',
                                    value:'Mono',
                                    disabled:true
                                },
                                {
                                    name:'Display',
                                    value:'Display',
                                    disabled:true
                                },
                                {
                                    name:'Kufi',
                                    value:'Kufi',
                                    disabled:true
                                },
                                {
                                    name:'Nastaliq',
                                    value:'Nastaliq',
                                    disabled:true
                                }
                            ],
                            weight: [
                                {
                                    name:'Thin',
                                    value:'Thin'
                                },
                                {
                                    name:'ExtraLight',
                                    value:'ExtraLight'
                                },
                                {
                                    name:'Light',
                                    value:'Light'
                                },
                                {
                                    name:'Regular',
                                    value:'Regular'
                                },
                                {
                                    name:'Medium',
                                    value:'Medium'
                                },
                                {
                                    name:'SemiBold',
                                    value:'SemiBold'
                                },
                                {
                                    name:'Bold',
                                    value:'Bold'
                                },
                                {
                                    name:'ExtraBold',
                                    value:'ExtraBold'
                                },
                                {
                                    name:'Black',
                                    value:'Black'
                                }
                            ],
                            width: [
                                {
                                    name:'ExtraCondensed',
                                    value:'ExtraCondensed'
                                },
                                {
                                    name:'SemiCondensed',
                                    value:'SemiCondensed'
                                },
                                {
                                    name:'Condensed',
                                    value:'Condensed'
                                },
                                {
                                    name:'Normal',
                                    value:'Normal'
                                }
                            ],
                            metrics: {
                                ascender: {
                                    name:'Ascender',
                                    min: 0,
                                    max: 1000
                                },
                                descender: {
                                    name:'Descender',
                                    min: -1000,
                                    max: 0
                                }
                            },
                            hinted: {
                                name:'Hinted'
                            },
                            ui: {
                                name:'UI'
                            },
                            subset: [
                                {
                                    name:'Latin',
                                    value:'Latin',
                                    subsets: [
                                        {
                                            name:'Basic Latin',
                                            value:'BasicLatin',
                                            disabled:true,
                                            default:true
                                        },
                                        {
                                            name:'Extended Latin',
                                            value:'ExtendedLatin',
                                            disabled:true,
                                            default:false
                                        },
                                        {
                                            name:'Unicode Latin',
                                            value:'UnicodeLatin',
                                            disabled:true,
                                            default:false
                                        }
                                    ]
                                },
                                {
                                    name:'Greek',
                                    value:'Greek',
                                    subsets: [
                                        {
                                            name:'Basic Greek',
                                            value:'BasicGreek',
                                            disabled:true,
                                            default:true
                                        },
                                        {
                                            name:'Extended Greek',
                                            value:'ExtendedGreek',
                                            disabled:true,
                                            default:false
                                        }
                                    ]
                                },
                                {
                                    name:'Cyrillic',
                                    value:'Cyrillic',
                                    subsets: [
                                        {
                                            name:'Basic Cyrillic',
                                            value:'BasicCyrillic',
                                            disabled:true,
                                            default:true
                                        },
                                        {
                                            name:'Extended Cyrillic',
                                            value:'ExtendedCyrillic',
                                            disabled:true,
                                            default:false
                                        }
                                    ]
                                },
                                {
                                    name:'Arabic',
                                    value:'Arabic',
                                    subsets: [
                                        {
                                            name:'Basic Arabic',
                                            value:'BasicArabic',
                                            disabled:true,
                                            default:true
                                        },
                                        {
                                            name:'Extended Arabic',
                                            value:'ExtendedArabic',
                                            disabled:true,
                                            default:false
                                        }
                                    ]
                                },
                                {
                                    name:'Tamil',
                                    value:'Tamil',
                                    subsets: [
                                        {
                                            name:'Basic Tamil',
                                            value:'BasicTamil',
                                            disabled:true,
                                            default:true
                                        },
                                        {
                                            name:'Extended Tamil',
                                            value:'ExtendedTamil',
                                            disabled:true,
                                            default:false
                                        }
                                    ]
                                }
                            ]
                        },
                        choicesIndexed: {
                            scriptsByValue: {},
                            stylesByName: {},
                            subsetByName: {}
                        },
                        options: {
                            name: '',
                            version: '',
                            output: [],
                            contrast: '',
                            styles: [],
                            scripts: [],
                            scripts_all: false,
                            scripts_filter: '',
                            scripts_show_all: false,
                            scripts_dragging: false,
                            weight: [],
                            weights_all: false,
                            width: [],
                            widths_all: false,
                            metrics: {
                                ascender: 0,
                                descender: 0
                            },
                            hinted: false,
                            ui: false,
                            subset: {
                                Latin: '',
                                Greek: '',
                                Cyrillic: '',
                                Tamil: '',
                                Arabic: ''
                            },
                            subset_chars: '',
                            swap_enabled: false,
                            swap_altIJ_enabled: false,
                            swap_altIJ: false,
                            swap_figures: ''
                        },
                        command: '',
                        commandOk: false,
                        copyCommandDone: false,
                        copyCommandDoneTimeout: 0
                    }
                },
                filters: {
                    scriptName: function(value) {
                        return app.choicesIndexed.scriptsByValue[value]['name'];
                    },
                    slugify: function (value) {
                        return utils.string.slugify(value);
                    },
                    upper: function (value) {
                        return String(value).toUpperCase();
                    }
                },
                methods: {
                    isScriptSelected: function(name) {
                        return utils.array.contains(
                            this.options.scripts, name);
                    },
                    toggleScriptsShowAll: function(argument) {
                        this.options.scripts_show_all = !this.options.scripts_show_all;
                    },
                    disableAllStyles: function() {
                        // disable all style choices
                        this.choices.styles.forEach(function(style) {
                            style.disabled = true;
                        });
                    },
                    enableScriptStyles: function(scriptName, styleNames) {
                        // enable only style choices of selected scripts
                        var scope = this;
                        if (this.isScriptSelected(scriptName)) {
                            styleNames.forEach(function(styleName) {
                                scope.choicesIndexed.stylesByName[styleName].disabled = false;
                            });
                        }
                    },
                    updateStyles: function() {
                        this.disableAllStyles();
                        this.enableScriptStyles('Latin', ['Italic', 'Display', 'Mono']);
                        this.enableScriptStyles('Greek', ['Italic', 'Display', 'Mono']);
                        this.enableScriptStyles('Cyrillic', ['Italic', 'Display', 'Mono']);
                        this.enableScriptStyles('Tamil', ['Italic']);
                        this.enableScriptStyles('Arabic', ['Kufi', 'Nastaliq']);
                        this.updateStylesOptions();
                    },
                    updateStylesOptions: function() {
                        // remove disabled style choices from options
                        var scope = this;
                        this.choices.styles.forEach(function(style) {
                            if (style.disabled === true) {
                                utils.array.remove(scope.options.styles, style.value);
                            }
                        });
                    },
                    updateStylesArabic: function() {
                        var stylesSelected = this.options.styles;
                        var indexOfKufi = stylesSelected.indexOf('Kufi');
                        var indexOfNastaliq = stylesSelected.indexOf('Nastaliq');
                        if (indexOfKufi > -1 && indexOfNastaliq > -1) {
                            if (indexOfKufi < indexOfNastaliq) {
                                // remove Kufi on check Nastaliq
                                utils.array.remove(stylesSelected, 'Kufi');
                            } else if (indexOfNastaliq < indexOfKufi) {
                                // remove Nastaliq on check Kufi
                                utils.array.remove(stylesSelected, 'Nastaliq');
                            }
                        }
                    },
                    updateSubset: function() {
                        this.updateSubsetForScript('Arabic');
                        this.updateSubsetForScript('Cyrillic');
                        this.updateSubsetForScript('Greek');
                        this.updateSubsetForScript('Latin');
                        this.updateSubsetForScript('Tamil');
                    },
                    updateSubsetForScript: function(scriptName) {
                        var scope = this;
                        var subsetScriptSelected = this.isScriptSelected(scriptName);
                        var subsetDisabled = Boolean(!subsetScriptSelected);
                        // disable Arabic subset controls if Nastaliq is checked
                        if (scriptName === 'Arabic' && this.options.styles.indexOf('Nastaliq') > -1) {
                            subsetDisabled = true;
                        }
                        if (this.options.subset_chars !== '') {
                            subsetDisabled = true;
                        }
                        this.updateSubsetForScriptOptions(scriptName, subsetDisabled);
                    },
                    updateSubsetForScriptOptions: function(scriptName, disabled) {
                        var scope = this;
                        this.choicesIndexed.subsetByName[scriptName].subsets.forEach(function(subset) {
                            subset.disabled = disabled;
                            if (disabled === true) {
                                scope.options.subset[scriptName] = '';
                            } else {
                                // automatically check default subset(s)
                                if (subset.default === true) {
                                    scope.options.subset[scriptName] = subset.value;
                                }
                            }
                        });
                    },
                    updateSwap: function() {
                        if (this.isScriptSelected('Latin') || this.isScriptSelected('Greek') || this.isScriptSelected('Cyrillic')) {
                            this.options.swap_enabled = true;
                        } else {
                            this.options.swap_enabled = false;
                            this.options.swap_altIJ = false;
                            this.options.swap_figures = '';
                        }
                        if (this.options.contrast === 'Sans') {
                            this.options.swap_altIJ_enabled = true;
                        } else {
                            this.options.swap_altIJ_enabled = false;
                            this.options.swap_altIJ = false;
                        }
                    },
                    updateSelectDeselectAll: function(allKey, valuesKey) {
                        if (this.options[allKey]) {
                            var valuesList = this.options[valuesKey];
                            var listContains = utils.array.contains;
                            this.choices[valuesKey].forEach(function(item) {
                                if (!listContains(valuesList, item.value)) {
                                    valuesList.push(item.value);
                                }
                            });
                        } else {
                            this.options[valuesKey] = [];
                        }
                    },
                    onChangeContrast: function() {
                        this.updateSwap();
                    },
                    onChangeStyles: function() {
                        this.updateStylesArabic();
                        this.updateSubset();
                    },
                    onChangeScriptsFilter: function() {
                        var scripts = this.choices.scripts;
                        var filter = this.options.scripts_filter;
                        if (filter !== '') {
                            scripts.forEach(function(el) {
                                if (el.name.toLowerCase().indexOf(filter) === 0) {
                                    el.hidden = false;
                                } else {
                                    el.hidden = true;
                                }
                            });
                        } else {
                            scripts.forEach(function(el) {
                                el.hidden = false;
                            });
                        }
                    },
                    onChangeScriptsAll: function() {
                        this.updateSelectDeselectAll('scripts_all', 'scripts');
                        this.onChangeScripts();
                    },
                    onChangeScripts: function() {
                        this.updateStyles();
                        this.updateSubset();
                        this.updateSwap();
                    },
                    onChangeWeightsAll: function() {
                        this.updateSelectDeselectAll('weights_all', 'weight');
                    },
                    onChangeWidthsAll: function() {
                        this.updateSelectDeselectAll('widths_all', 'width');
                    },
                    onChangeCharacterSubset: function() {
                        this.updateSubset();
                    },
                    buildCommand: function() {
                        command_options = []

                        var name = this.options.name;
                        if (name !== '') {
                            name = utils.string.replace(name, ' ', '-');
                            command_options.push('--name "' + name + '"');
                        }

                        var version = this.options.version;
                        if (version !== '') {
                            // name = utils.string.replace(name, ' ', '-');
                            command_options.push('--version ' + version);
                        }

                        var output = this.options.output;
                        if (output.length > 0) {
                            command_options.push('--output ' + output.join(' '));
                        }

                        var scripts = this.options.scripts;
                        if (scripts.length > 0) {
                            command_options.push('--scripts ' + scripts.join(' '));
                        }

                        var constrast = this.options.contrast;
                        if (constrast !== '') {
                            command_options.push('--contrast ' + constrast);
                        }

                        var styles = this.options.styles;
                        if (styles.length > 0) {
                            command_options.push('--styles ' + styles.join(' '));
                        }

                        var weight = this.options.weight;
                        if (weight.length > 0) {
                            command_options.push('--weight ' + weight.join(' '));
                        }

                        var width = this.options.width;
                        if (width.length > 0) {
                            command_options.push('--width ' + width.join(' '));
                        }

                        var metrics_options = this.options.metrics;
                        var metrics_ascender = Number(metrics_options.ascender);
                        var metrics_descender = Number(metrics_options.descender);
                        var metrics = [metrics_ascender, metrics_descender];
                        if (!isNaN(metrics_ascender) && !isNaN(metrics_descender)) {
                            if (metrics_ascender || metrics_descender) {
                                command_options.push('--metrics "' + metrics.join(' ') + '"');
                            }
                        }

                        var hinted = this.options.hinted;
                        if (hinted === true) {
                            command_options.push('--hinted');
                        }

                        var ui = this.options.ui;
                        if (ui === true) {
                            command_options.push('--ui');
                        }

                        var subset = this.options.subset;
                        var subsetValues = utils.array.clean(utils.object.values(subset), true);
                        if (subsetValues.length > 0) {
                            subsetValues.sort();
                            command_options.push('--preset ' + subsetValues.join(' '));
                        }

                        var subset_chars = this.options.subset_chars;
                        var subset_chars_list;
                        if (subset_chars.length > 0) {
                            subset_chars_list = subset_chars.split('');
                            subset_chars_list = utils.array.unique(subset_chars_list);
                            subset_chars_list = utils.array.remove(subset_chars_list, ' ')
                            if (subset_chars_list.length > 0) {
                                subset_chars_list.sort();
                                subset_chars = subset_chars_list.join('');
                                subset_chars = utils.string.replace(subset_chars, '"', '\\"');
                                command_options.push('--subset "' + subset_chars + '"');
                            }
                        }

                        var swapOptions = [];
                        var swap_altIJ = this.options.swap_altIJ;
                        var swap_figures = this.options.swap_figures;
                        if (swap_altIJ === true) {
                            swapOptions.push('altIJ');
                        }
                        if (swap_figures.length > 0) {
                            swapOptions.push(swap_figures);
                        }
                        if (swapOptions.length > 0) {
                            command_options.push('--swap ' + swapOptions.join(' '));
                        }

                        return 'python ~/notobuilderCLI.py ' + command_options.join(' ');
                    },
                    copyCommand: function() {
                        var scope = this;
                        var onCopySuccess = function() {
                            // alert('Copied! :)');
                            clearTimeout(scope.copyCommandDoneTimeout);
                            scope.copyCommandDone = true;
                            scope.copyCommandDoneTimeout = setTimeout(function() {
                                scope.copyCommandDone = false;
                            }, 1500);
                        };
                        var onCopyError = function() {
                            // alert('Copying error... :(');
                        };
                        Clipboard.copy(this.command, onCopySuccess, onCopyError);
                    },
                    updateCommand: function() {
                        this.command = this.buildCommand();
                        this.commandOk = (this.options.contrast !== '' && this.options.scripts.length > 0);
                    }
                },
                mounted: function() {
                    var indexList = utils.array.index;
                    this.choicesIndexed.scriptsByValue = indexList(this.choices.scripts, 'value', true);
                    this.choicesIndexed.stylesByName = indexList(this.choices.styles, 'name', true);
                    this.choicesIndexed.subsetByName = indexList(this.choices.subset, 'name', true);
                    this.ready = true;
                },
                updated: function() {
                    this.updateCommand();
                }
            });
        </script>
    </body>
</html>